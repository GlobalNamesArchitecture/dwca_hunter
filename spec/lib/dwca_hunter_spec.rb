authors = [
  "(Abdulali, 1965)",
  "(Afzelius 1804)",
  "(Aldrich & Nutt, 1939)",
  "(Allen, GM, 1905)",
  "(Alström & Olsson, 1999)",
  "(Ash, Pearson, DJ & Bensch, 2005)",
  "(Baird, WM & Baird, SF, 1843)",
  "(Bangs & Penard, TE, 1918)",
  "(Baral et al., 2007)",
  "(Bertoni, M & Bertoni, AWGT, 1901)",
  "(Bierregaard, Cohn-Haft & Stotz, 1997)",
  "(Bond & Meyer de Schauensee, 1939)",
  "(Boucard & von Berlepsch, 1892)",
  "(Cabot, J & de Vries, 2009)",
  "(Cheng, Li, G & Zhang, Q, 1983)",
  "(Cheng, Lo & Chao, 1973)",
  "(Cunningham-van Someren & Schifter, 1981)",
  "(Dubois, AJC, 1875)",
  "(Lönnberg, 1904)",
  "(Phelps & Phelps Jr, 1947)",
  "(Phelps Jr & Aveledo, 1984)",
  "(Ripley & Marshall, JT Jr, 1967)",
  "(Robinson-Dean et al., 2002)",
  "(Salvadori & D'Albertis, 1875)",
  "(Schlegel & Müller, S, 1841)",
  "(von Ihering, H & von Ihering, R, 1907)",
  "(zu Wied-Neuwied, 1820)",
  "Abdulali & Grubh, 1970",
  "Abdulali, 1961",
  "Aleixo et al., 2013",
  "Allen, D, Oliveros, Espanola, Broad & Gonzalez, 2004",
  "Allen, JA, 1875",
  "Alström & Olsson, 1995",
  "Alström et al., 2019",
  "Baird, SF, 1854",
  "Baker, ECS, 1914",
  "Baker, NE & Baker, EM, 1990",
  "Bangs & Penard, TE, 1918",
  "Banks, Weckstein, Remsen & Johnson, KP, 2013",
  "Barboza du Bocage, 1891",
  "Bertoni, M & Bertoni, AW, 1901",
  "Bond & Meyer de Schauensee, 1939",
  "Bowie, Fjeldså, Kiure & Kristensen, 2016",
  "Cain & Galbraith, ICJ, 1955",
  "Carantón-Ayala & Certuche-Cubillos, 2010",
  "Cunningham-van Someren & Schifter, 1981",
  "Davis, TJ & O'Neill, 1986",
  "Du Bus de Gisignies, 1840",
  "Eisenmann & Phelps Jr, 1971",
  "Geoffroy Saint-Hilaire, I & Lesson, R, 1831",
  "Hernández-Camacho & Rodríguez-M, 1979",
  "Kleinschmidt, O & Hilgert, 1905",
  "Mann, NI, Barker, Graves, JA, Dingess-Mann & Slater, PJB, 2006",
  "Sangster, Garcia-R & Trewick, 2015",
  "d'Orbigny & Lafresnaye, 1838",
  "da Rosa Pinto, 1963",
  "duPont & Rabor, 1973",
  "van Tets, Meredith, Fullagar & Davidson, P, 1988",
  "von Müller, JW, 1851",
  "von Rosenberg, HKB, 1861",
  "zu Wied-Neuwied, 1831",
  "zu Wied-Neuwied, 1841",
  "Álvarez Alonso & Whitney, 2001",
  "Érard & Jarry, 1973"
]

norm_authors = [
  "(Abdulali, 1965)",
  "(Afzelius 1804)",
  "(Aldrich & Nutt, 1939)",
  "(G. M. Allen, 1905)",
  "(Alström & Olsson, 1999)",
  "(Ash, D. J. Pearson & Bensch, 2005)",
  "(W. M. Baird & S. F. Baird, 1843)",
  "(Bangs & T. E. Penard, 1918)",
  "(Baral et al., 2007)",
  "(M. Bertoni & A. W. G. T. Bertoni, 1901)",
  "(Bierregaard, Cohn-Haft & Stotz, 1997)",
  "(Bond & Meyer de Schauensee, 1939)",
  "(Boucard & von Berlepsch, 1892)",
  "(J. Cabot & de Vries, 2009)",
  "(Cheng, G. Li & Q. Zhang, 1983)",
  "(Cheng, Lo & Chao, 1973)",
  "(Cunningham-van Someren & Schifter, 1981)",
  "(A. J. C. Dubois, 1875)",
  "(Lönnberg, 1904)",
  "(Phelps & Phelps Jr, 1947)",
  "(Phelps Jr & Aveledo, 1984)",
  "(Ripley & J. T. Marshall Jr, 1967)",
  "(Robinson-Dean et al., 2002)",
  "(Salvadori & D'Albertis, 1875)",
  "(Schlegel & S. Müller, 1841)",
  "(H. von Ihering & R. von Ihering, 1907)",
  "(zu Wied-Neuwied, 1820)",
  "Abdulali & Grubh, 1970",
  "Abdulali, 1961",
  "Aleixo et al., 2013",
  "D. Allen, Oliveros, Espanola, Broad & Gonzalez, 2004",
  "J. A. Allen, 1875",
  "Alström & Olsson, 1995",
  "Alström et al., 2019",
  "S. F. Baird, 1854",
  "E. C. S. Baker, 1914",
  "N. E. Baker & E. M. Baker, 1990",
  "Bangs & T. E. Penard, 1918",
  "Banks, Weckstein, Remsen & K. P. Johnson, 2013",
  "Barboza du Bocage, 1891",
  "M. Bertoni & A. W. Bertoni, 1901",
  "Bond & Meyer de Schauensee, 1939",
  "Bowie, Fjeldså, Kiure & Kristensen, 2016",
  "Cain & I. C. J. Galbraith, 1955",
  "Carantón-Ayala & Certuche-Cubillos, 2010",
  "Cunningham-van Someren & Schifter, 1981",
  "T. J. Davis & O'Neill, 1986",
  "Du Bus de Gisignies, 1840",
  "Eisenmann & Phelps Jr, 1971",
  "I. Geoffroy Saint-Hilaire & R. Lesson, 1831",
  "Hernández-Camacho & Rodríguez-M, 1979",
  "O. Kleinschmidt & Hilgert, 1905",
  "N. I. Mann, Barker, J. A. Graves, Dingess-Mann & P. J. B. Slater, 2006",
  "Sangster, Garcia-R & Trewick, 2015",
  "d'Orbigny & Lafresnaye, 1838",
  "da Rosa Pinto, 1963",
  "du Pont & Rabor, 1973",
  "van Tets, Meredith, Fullagar & P. Davidson, 1988",
  "J. W. von Müller, 1851",
  "H. K. B. von Rosenberg, 1861",
  "zu Wied-Neuwied, 1831",
  "zu Wied-Neuwied, 1841",
  "Álvarez Alonso & Whitney, 2001",
  "Érard & Jarry, 1973"
]

describe DwcaHunter do
  describe ".version" do
    it "returns the current version" do
      expect(subject.version).to match(/\d+\.\d+\.\d+/)
    end
  end

  describe ".resources" do
    it "finds registered resources" do
      res = subject.resources
      expect(res.size).to be == 30
    end
  end

  describe ".normalize_authors" do
    it "normalizes authors format" do
      authors.each_with_index do |a, i|
        res = subject.normalize_authors(a)
        expect(res).to eq(norm_authors[i])
      end
    end
  end
end
